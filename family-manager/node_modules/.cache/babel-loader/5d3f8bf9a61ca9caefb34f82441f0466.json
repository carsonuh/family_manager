{"ast":null,"code":"var _jsxFileName = \"/Users/carson/Documents/GitHub/family_manager/family-manager/src/components/ShoppingList.jsx\";\nimport React, { Component } from \"react\";\nimport firebase from '../firebase.js';\nimport \"./shoppingList.css\";\n\nclass ShoppingList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      userEmail: this.props.userEmail,\n      fireDocId: null,\n      items: []\n    };\n    this.fetchUserData = this.fetchUserData.bind(this);\n    this.checkIfUserExists = this.checkIfUserExists.bind(this);\n  }\n\n  componentDidMount() {\n    //Upon loading the component, check to see if a user exists\n    //Return data into the callback and execute a data update\n    this.checkIfUserExists(this.fetchUserData);\n  }\n  /**\n   * Checks to see if a signed in user has data in the DB\n   * Returns a boolean of the above condition into the callback\n   * @param {callback function} callback \n   */\n\n\n  checkIfUserExists(callback) {\n    //Connect to the firebase DB\n    const db = firebase.firestore(); //Query the DB to see if the users email is present\n\n    db.collection(\"TestShoppingList\").where(\"email\", \"==\", this.state.userEmail).get().then(querySnapshot => {\n      let userExists = false; //If the email isn't present, the user doesn't exist\n\n      if (querySnapshot.size === 0) {\n        userExists = false;\n      } else {\n        //If the email does exist, update the firestore document ID in state\n        this.setState({\n          fireDocId: querySnapshot.docs[0].id\n        });\n        userExists = true;\n      }\n\n      callback(userExists);\n    }).catch(error => {\n      console.log(\"Error Getting Documents! \" + error);\n    });\n  }\n  /**\n   * Loads user data into the calendar via a DB call and a state update\n   * @param {whether a user exists} userExists \n   */\n\n\n  fetchListData(userExists) {\n    //If a user exists pull their event data from the DB\n    if (userExists) {\n      console.log('user exists, fetching data');\n      const db = firebase.firestore();\n      db.collection(\"TestShoppingList\").doc(this.state.fireDocId).get().then(doc => {\n        if (doc) {\n          let returnedData = doc.data().items;\n          console.log(returnedData);\n          this.setState({\n            items: returnedData\n          });\n          alert(this.state.items);\n        } else {\n          console.log('Counldnt find user data');\n        }\n      }).catch(error => {\n        console.log(\"error fetching existing user data! \" + error);\n      });\n    } else {\n      //This block is executed if it's a users first time logging in\n      alert(\"Welcome, Start by adding some data to the calendar\"); //Create an entry in the DB for the new user, update the doc ref\n      //with the one retuned from add()\n\n      const db = firebase.firestore();\n      db.collection(\"TestShoppingList\").add({\n        email: this.state.userEmail,\n        items: []\n      }).then(docRef => {\n        this.setState({\n          fireDocId: docRef.id\n        });\n      }).catch(error => {\n        console.log(\"error submitting first time user data\" + error);\n      });\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, \"Shopping List\"), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"checkbox\",\n      value: \"trash\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }), \"Trash\"), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, this.state.list));\n  }\n\n}\n\nexport default ShoppingList;","map":{"version":3,"sources":["/Users/carson/Documents/GitHub/family_manager/family-manager/src/components/ShoppingList.jsx"],"names":["React","Component","firebase","ShoppingList","constructor","props","state","userEmail","fireDocId","items","fetchUserData","bind","checkIfUserExists","componentDidMount","callback","db","firestore","collection","where","get","then","querySnapshot","userExists","size","setState","docs","id","catch","error","console","log","fetchListData","doc","returnedData","data","alert","add","email","docRef","render","list"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\"\nimport firebase from '../firebase.js';\nimport \"./shoppingList.css\"\n\nclass ShoppingList extends Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            userEmail: this.props.userEmail, \n            fireDocId: null,\n            items: []\n        }\n        this.fetchUserData = this.fetchUserData.bind(this);\n        this.checkIfUserExists = this.checkIfUserExists.bind(this);\n    }\n\n    componentDidMount() {\n        //Upon loading the component, check to see if a user exists\n        //Return data into the callback and execute a data update\n        this.checkIfUserExists(this.fetchUserData)\n    }\n\n    /**\n     * Checks to see if a signed in user has data in the DB\n     * Returns a boolean of the above condition into the callback\n     * @param {callback function} callback \n     */\n    checkIfUserExists(callback) {\n        //Connect to the firebase DB\n        const db = firebase.firestore();\n\n        //Query the DB to see if the users email is present\n        db.collection(\"TestShoppingList\").where(\"email\", \"==\", this.state.userEmail)\n            .get()\n            .then((querySnapshot) => {\n                let userExists = false;\n\n                //If the email isn't present, the user doesn't exist\n                if(querySnapshot.size === 0) {\n                    userExists = false;\n                } else {\n                    //If the email does exist, update the firestore document ID in state\n                    this.setState({fireDocId: querySnapshot.docs[0].id});\n                    userExists = true;\n                }\n                callback(userExists)\n            })\n            .catch((error) => {\n                console.log(\"Error Getting Documents! \" + error);\n            });\n    }\n\n    /**\n     * Loads user data into the calendar via a DB call and a state update\n     * @param {whether a user exists} userExists \n     */\n    fetchListData(userExists) {\n\n        //If a user exists pull their event data from the DB\n        if(userExists) {\n            console.log('user exists, fetching data');\n            const db = firebase.firestore();\n            db.collection(\"TestShoppingList\").doc(this.state.fireDocId)\n                .get()\n                .then((doc) => {\n                    if(doc) {\n                        let returnedData = doc.data().items;\n                        console.log(returnedData);\n                        this.setState({items: returnedData});\n                        alert(this.state.items)\n                    } else {\n                        console.log('Counldnt find user data');\n                    }\n                })\n                .catch((error) => {\n                    console.log(\"error fetching existing user data! \" + error);\n                })\n        } else {\n            //This block is executed if it's a users first time logging in\n            alert(\"Welcome, Start by adding some data to the calendar\");\n            \n            //Create an entry in the DB for the new user, update the doc ref\n            //with the one retuned from add()\n            const db = firebase.firestore();\n            db.collection(\"TestShoppingList\").add({\n                email: this.state.userEmail,\n                items: []\n            }).then((docRef) => {\n                this.setState({fireDocId: docRef.id});\n            })\n            .catch((error) => {\n                console.log(\"error submitting first time user data\" + error); \n            })\n        }\n    }\n\n    render()\n    {\n        return (\n        <div className=\"list\">\n            <h1>Shopping List</h1>\n            <label>\n                <input type=\"checkbox\" value=\"trash\"/>\n                Trash\n            </label>\n            <hr></hr>\n            <p>{this.state.list}</p>\n        </div>\n    )\n}\n}\n \nexport default ShoppingList"]},"metadata":{},"sourceType":"module"}